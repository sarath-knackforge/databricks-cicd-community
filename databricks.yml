bundle:
  name: model-deploy

include:
  - resources/model_deployment.yml
  # - resources/schema_provisioning.yml
  # - resources/customer_onboard.yml

artifacts:
  default:
    type: whl
    build: uv build
    path: .

# ---------------------
# VARIABLES (TOP LEVEL)
# ---------------------
variables:
  git_sha:
    description: git_sha
    default: abcd

  branch:
    description: branch
    default: main

  schedule_pause_status:
    description: schedule pause status
    default: PAUSED

  model_name:
    description: Full UC MLflow Model Name
    # default: mlops_prod.model_test.model_deploy     # âœ” MUST MATCH UC MODEL NAME FOR TRIAL AND PRODUCTION
    default: workspace.default.model_deploy       # for community version of databricks


# ---------------------
# TARGETS
# ---------------------
targets:
  dev:
    default: true
    mode: development

    workspace:
      host: https://dbc-f0ecd2b2-b14a.cloud.databricks.com/
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.target}/${bundle.name}
      # profile: dbc-f0ecd2b2-b14a

    variables:
      schedule_pause_status: UNPAUSED
      # If you want environment-specific model names:
      # model_name: mlops_prod.model_test.model_deploy

  acc:
    presets:
      name_prefix: "acc_"

    workspace:
      host: https://dbc-f0ecd2b2-b14a.cloud.databricks.com/
      root_path: /Shared/.bundle/${bundle.target}/${bundle.name}
      # profile: dbc-f0ecd2b2-b14a

    variables:
      schedule_pause_status: UNPAUSED
      # model_name: mlops_prod.model_test.model_deploy

  prd:
    mode: production

    workspace:
      host: https://dbc-f0ecd2b2-b14a.cloud.databricks.com/
      root_path: /Shared/.bundle/${bundle.target}/${bundle.name}
      # profile: dbc-f0ecd2b2-b14a

    variables:
      schedule_pause_status: UNPAUSED
      # model_name: mlops_prod.model_test.model_deploy
